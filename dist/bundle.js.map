{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/helpers.js","webpack:///./src/model.js","webpack:///./src/view.js","webpack:///./src/controller.js","webpack:///./src/app.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","EventEmitter","_classCallCheck","this","events","event","listener","push","_len","arguments","length","args","Array","_key","forEach","apply","_this","_len2","_key2","Model","existingTodos","model_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","todos","title","todo","id","concat","Date","valueOf","done","filter","editingTodo","find","togglingTodo","localStorage","setItem","JSON","stringify","View","view_classCallCheck","view_getPrototypeOf","todoItems","document","querySelector","todoForm","todoFormInput","addEventListener","handlerAdd","view_assertThisInitialized","tag","classNames","atributes","innerHtmlTemplate","element","_ref","todoItem","createElement","setAttribute","className","classList","add","innerHTML","attachEventHandlers","appendChild","getElementById","parentNode","removeChild","textContent","toggle","_this2","checkbox","buttonDelete","buttonEdit","input","handlerToggle","handlerDelete","handlerEdit","keyCode","preventDefault","emit","target","label","contains","Controller","model","view","controller_classCallCheck","controller_getPrototypeOf","addTodo","on","controller_assertThisInitialized","deleteTodo","editTodo","toggleTodo","updateStorage","parse","getItem"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","function createElement(tag, classNames, atributes, innerHtmlTemplate) {\n  const element = document.createElement(tag);\n\n  atributes.forEach(({ name, value }) => element.setAttribute(name, value));\n  classNames.forEach((className) => {\n    if (className) element.classList.add(className);\n  });\n  element.innerHTML = innerHtmlTemplate;\n\n  return element;\n}\n\nclass EventEmitter {\n  constructor() {\n    this.events = {};\n  }\n\n  on(event, listener) {\n    if (!this.events[event]) {\n      this.events[event] = [];\n    }\n    this.events[event].push(listener);\n  }\n\n  emit(event, ...args) {\n    if (this.events[event].length && this.events[event]) {\n      this.events[event].forEach(listener => listener(...args));\n    }\n  }\n\n  removeEvents(...events) {\n    events.forEach(event => delete this.events[event]);\n  }\n}\n\nexport { EventEmitter, createElement };\n","import { EventEmitter } from './helpers';\n\nexport default class Model extends EventEmitter {\n  constructor(existingTodos) {\n    super();\n\n    this.todos = existingTodos || [];\n  }\n\n  addTodo(title) {\n    const todo = {\n      title,\n      id: `${new Date().valueOf()}`,\n      done: false,\n    };\n\n    this.todos.push(todo);\n\n    return todo;\n  }\n\n  deleteTodo(id) {\n    this.todos.filter(todo => (todo.id !== id));\n  }\n\n  editTodo(id, title) {\n    const editingTodo = this.todos.find(todo => (todo.id === id));\n\n    editingTodo.title = title;\n\n    return editingTodo;\n  }\n\n  toggleTodo(id) {\n    const togglingTodo = this.todos.find(todo => (todo.id === id));\n\n    togglingTodo.done = !togglingTodo.done;\n  }\n\n  updateStorage() {\n    localStorage.setItem('todos', JSON.stringify(this.todos));\n  }\n}\n","import { EventEmitter, createElement } from './helpers';\n\nexport default class View extends EventEmitter {\n  constructor() {\n    super();\n\n    this.todoItems = document.querySelector('.todo-items');\n    this.todoForm = document.querySelector('.todo-form');\n    this.todoFormInput = document.querySelector('.todo-form-input');\n\n    this.todoForm.addEventListener('submit', this.handlerAdd.bind(this));\n  }\n\n  addTodo({ id, title, done }) {\n    const todoItem = createElement(\n      'li',\n      ['todo-item', `${done ? 'done' : ''}`],\n      [{ name: 'id', value: id }],\n      `\n      <input class=\"todo-item-checkbox\" type=\"checkbox\"${done ? ' checked' : ''}>\n      <label class=\"todo-item-title\">${title}</label>\n      <input class=\"todo-item-input\" type=\"text\">\n      <button class=\"edit-todo\">Изменить</button>\n      <button class=\"delete-todo\">Удалить</button>\n      `,\n    );\n\n    this.attachEventHandlers(todoItem);\n    this.todoItems.appendChild(todoItem);\n  }\n\n  deleteTodo(id) {\n    const todoItem = document.getElementById(id);\n    todoItem.parentNode.removeChild(todoItem);\n  }\n\n  editTodo(id, title) {\n    const todoItem = document.getElementById(id);\n    const label = todoItem.querySelector('.todo-item-title');\n\n    label.textContent = title;\n  }\n\n  toggleTodo(id) {\n    const todoItem = document.getElementById(id);\n    todoItem.classList.toggle('done');\n  }\n\n  attachEventHandlers(todoItem) {\n    const checkbox = todoItem.querySelector('.todo-item-checkbox');\n    const buttonDelete = todoItem.querySelector('.delete-todo');\n    const buttonEdit = todoItem.querySelector('.edit-todo');\n    const input = todoItem.querySelector('.todo-item-input');\n\n    checkbox.addEventListener('change', this.handlerToggle.bind(this));\n    buttonDelete.addEventListener('click', this.handlerDelete.bind(this));\n    buttonEdit.addEventListener('click', this.handlerEdit.bind(this));\n    input.addEventListener('keydown', (event) => {\n      if (event.keyCode === 13) this.handlerEdit(event);\n    });\n  }\n\n  handlerAdd(event) {\n    event.preventDefault();\n\n    const title = this.todoFormInput.value;\n    this.todoFormInput.value = '';\n\n    this.emit('add', title);\n  }\n\n  handlerDelete(event) {\n    const todoItem = event.target.parentNode;\n    const { id } = todoItem;\n\n    this.emit('delete', id);\n  }\n\n  handlerEdit(event) {\n    const todoItem = event.target.parentNode;\n    const label = todoItem.querySelector('.todo-item-title');\n    const input = todoItem.querySelector('.todo-item-input');\n    const buttonEdit = todoItem.querySelector('.edit-todo');\n    const { id } = todoItem;\n\n    if (todoItem.classList.contains('editing')) {\n      label.textContent = input.value;\n      buttonEdit.textContent = 'Изменить';\n      this.emit('edit', id, input.value);\n    } else {\n      input.value = label.textContent;\n      buttonEdit.textContent = 'Сохранить';\n    }\n\n    todoItem.classList.toggle('editing');\n  }\n\n  handlerToggle(event) {\n    const { id } = event.target.parentNode;\n\n    this.emit('toggle', id);\n  }\n}\n","import { EventEmitter } from './helpers';\n\nexport default class Controller extends EventEmitter {\n  constructor(model, view) {\n    super();\n\n    this.model = model;\n    this.view = view;\n\n    if (this.model.todos !== []) {\n      this.model.todos.forEach(todoItem => this.view.addTodo(todoItem));\n    }\n\n    this.view.on('add', this.addTodo.bind(this));\n    this.view.on('delete', this.deleteTodo.bind(this));\n    this.view.on('edit', this.editTodo.bind(this));\n    this.view.on('toggle', this.toggleTodo.bind(this));\n  }\n\n  addTodo(title) {\n    const todo = this.model.addTodo(title);\n    this.view.addTodo(todo);\n    this.model.updateStorage();\n  }\n\n  deleteTodo(id) {\n    this.model.deleteTodo(id);\n    this.view.deleteTodo(id);\n    this.model.updateStorage();\n  }\n\n  editTodo(id, title) {\n    this.model.editTodo(id, title);\n    this.view.editTodo(id, title);\n    this.model.updateStorage();\n  }\n\n  toggleTodo(id) {\n    this.model.toggleTodo(id);\n    this.view.toggleTodo(id);\n    this.model.updateStorage();\n  }\n}\n","import Model from './model';\nimport View from './view';\nimport Controller from './controller';\n\nconst existingTodos = JSON.parse(localStorage.getItem('todos'));\n\nconst view = new View();\nconst model = new Model(existingTodos);\n\nconst controller = new Controller(model, view);\n"],"sourceRoot":""}